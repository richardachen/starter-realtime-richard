<!-- --------------------------------- -->
<!-- ------- Request MBTA data ------- -->
<!-- --------------------------------- -->

<script>

// Request bus data from MBTA
async function getBusLocations(){
	// MBTA real-time data for bus route 1
	const url = 'https://api-v3.mbta.com/vehicles?filter[route]=1&include=trip';

	// get the data
	var response = await fetch(url);
	var json = await response.json();
	return json.data;
	// console.log(response)
}

// request data on a timer
async function run(){

	const locations = await getBusLocations();
	console.log(new Date());
	console.log(locations);
	// don't make timeout gap too short, or else you get banned
	// request bus data

	// timer
	setTimeout(run,15000);
}
run();

</script>